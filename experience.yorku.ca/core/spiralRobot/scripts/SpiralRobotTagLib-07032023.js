!function(t,i){var n="uiAccordion",o={collapseNonActive:!0},e={showAccordionItem:a,hideAccordionItem:s};function a(t){var n=d(t),o=i(this);l(n)||(function(t){return t.data("params")&&0==t.find(".js--ui-accordion-item-ajax").length}(n)?function(t,n){t.trigger("load");var o=t.find(".js--ui-accordion-item-title");o.addLoadingIcon(),i("<div class='js--ui-accordion-item-ajax'>").appendTo(t).load(t.data("url"),t.data("params"),(function(){o.removeLoadingIcon(),t.trigger("loaded"),n&&n()}))}(n,(function(){r(o,n)})):r(o,n))}function s(t){var i=d(t);l(i)&&(i.trigger("hide"),console.log(i.removeClass("is--expanded"),i.find(".js--btn--expand__accordion:first")),i.removeClass("is--expanded"),i.find(".js--btn--expand__accordion:first").removeClass("is--expanded"),i.trigger("hidden"))}function r(t,o){t.data(n).collapseNonActive&&t.find(".js--ui-accordion-item.is--expanded").not(o).each((function(){s.call(t,i(this))})),o.trigger("show"),o.addClass("is--expanded"),o.find(".js--btn--expand__accordion:first").addClass("is--expanded"),o.find(".accordion__content:first").animateCss("zoomInDown"),o.trigger("shown")}function d(t){var n=t;return"string"==typeof n&&(n=i("#"+n)),n}function l(t){return t.hasClass("is--expanded")}i.fn.uiAccordion=t.initOrbisPlugin(e,(function(t){return i(this),t=i.extend({},o,t),i("body").off("click.accordion"),i("body").on("click.accordion",".js--btn--expand__accordion",(function(){var t=i(this).parents(".js--ui-accordion-item:first");l(t)?s.call(t.parents(".js--ui-accordion:first"),t):a.call(t.parents(".js--ui-accordion:first"),t)})),t}),n)}(orbisAppSr,$),function(t,i){t.bottombar=new Object;var n="uiBottombar",o={show:e,hide:a,setTitle:function(t,i){var n=getbottombar(t);n.find(".bottomBar__title").html(i),i?n.find(".bottomBar__title").removeClass("display--none"):n.find(".bottomBar__title").addClass("display--none")},init:function(r){var d=s(r);(function(t){var n=s(t);n.data("openButtonSelector")&&i(n.data("openButtonSelector")).attr({"aria-controls":n.attr("id"),"aria-expanded":!1})})(d),t.bottombar[r]={show:function(){return o.show(d)},hide:function(){return o.hide(d)},setTitle:function(t){return o.setTitle(d,t)},bottombar:d},d.data(n,t.bottombar[r]),d.find(".js--close--bottomBar").click((function(){o.hide(d)})),d.data("uiShow",(function(){e(d)})),d.data("uiHide",(function(){a(d)}))}};function e(t){var i=s(t);i.hasClass("display--none")&&(i.removeClass("display--none"),r(t))}function a(t){var i=s(t);i.hasClass("display--none")||(i.addClass("display--none"),r(t))}function s(t){var n=t;return"string"==typeof n&&(n=i("#"+n)),n}function r(t){var n=s(t),o=!n.hasClass("display--none"),e=n.find(".js--close--bottomBar");n.data("openButtonSelector")&&(e=e.add(i(n.data("openButtonSelector")))),e.attr("aria-expanded",o),n.attr("aria-expanded",o)}i.fn.uiBottombar=function(t){var o={};if(i(this).data(n)){var e=i(this).data(n);o=e,null!=t&&"string"==typeof t&&t in e&&(o=e[t].apply(this,Array.prototype.slice.call(arguments,1)))}return o},t.bottombar.functions=o}(orbisAppSr,$),function(t,i){t.checkboxGroup=new Object;var n="uiCheckboxGroup",o=n+"-relSelectAll",e=n+"-relCheckboxes",a=n+"-relLabels",s=n+"-relCheckboxGroup",r=n+"-filterKeywords",d=n+"-lastChecked",l="groupChanged",c="js--checkbox-group-custom-required",u={selectAll:function(t){var i=b(t);return h(i).prop("checked",!0),v(i),i},deselectAll:function(t){var i=b(t);return h(i).prop("checked",!1),v(i),i},toggleAll:function(t){var i=b(t),n=h(i),o=i.find("input.js--other--toggle"),e=i.find("#other-textarea");n.prop("checked",n.filter(":checked").length!=n.length),o&&(o.is(":checked")?e.show():e.hide());return v(i),i},getValues:function(t){var n=b(t),o=new Array;return h(n).filter(":checked").each((function(){o.push(i(this).val())})),o},addFilterKeyword:function(t,i,n){b(t).data(r)[i]=n},removeFilterKeyword:function(t,i){delete b(t).data(r)[i]},update:function(t){v(t)},init:function(d){var l=b(d),h=l.find(".js--toggle-group-all-check"),v=l.find(".js--toggle-group-content input[type='checkbox']"),m=l.find(".js--toggle-group-content .js--checkbox-label-text"),y=l.find("input.js--filter-toggle-group"),k=l.find("input.js--other--toggle"),C=l.find("input.js--other--box"),j=l.find("#other-textarea");l.data(o,h),l.data(e,v),l.data(a,m),l.data(r,f),v.data(s,l),h.on("click",(function(){u.toggleAll(l)})),y.on("keyup",(function(){!function(t,i,n){var o=n.val();if(o){t.addClass("js--is-filtered");var e=t.data(r);o in e?e[o](t,i):e.defaultFilter(t,i,o),t.parents(".js--ui-sidebar").scrollTop(0),t.find(".panel__body.has--custom--scrollbar").hasClass("ps")&&(t.find(".panel__body.has--custom--scrollbar.ps").scrollTop(0),t.find(".panel__body.has--custom--scrollbar.ps").perfectScrollbar("update"))}else t.removeClass("js--is-filtered"),t.find(".js--toggle-group-content .input__group").show();g(t)}(l,v,y)})),v.on("click",(function(t){p.call(this,t,l,v)})),t.startMouseClickTracker(),k.on("change",(function(){i(this).is(":checked")&&C.focus()})),C.on("blur",(function(n){!t.currentlyClicked||t.currentlyClicked.is(k.parents("label:first").find("*"))||t.currentlyClicked.is(k.parents("label:first"))||k.prop("checked",i(this).val()&&i(this).val().trim()),i.validator&&v.length&&v.first().valid()})),C.on("keyup",(function(t){k.prop("checked",i(this).val()&&i(this).val().trim()),i(this).val()&&i(this).val().trim()?j.show():j.hide()})),i.validator&&!i.validator.methods[c]&&i.validator.addMethod(c,(function(t,n){var o=i(n).parents(".ui--checkbox-group:first").find(".js--other--box");return this.getLength(t,n)>0||o.length&&o.val()}),orbisAppLocalized.translations.tags.uiCheckboxGroup.youMustSelectAtLeastOneItem);t.checkboxGroup[d]={selectAll:function(){return u.selectAll(l)},deselectAll:function(){return u.deselectAll(l)},toggleAll:function(){return u.toggleAll(l)},getValues:function(){return u.getValues(l)},addFilterKeyword:function(t,i){return u.addFilterKeyword(l,t,i)},removeFilterKeyword:function(t){return u.removeFilterKeyword(l,t)},checkboxGroup:l},l.data(n,t.checkboxGroup[d]),g(l)}},f={checked:function(t,n){n.filter(":checked").each((function(){i(this).parents(".input__group:first").show()})),n.filter(":not(:checked)").each((function(){i(this).parents(".input__group:first").hide()}))},unchecked:function(t,n){n.filter(":checked").each((function(){i(this).parents(".input__group:first").hide()})),n.filter(":not(:checked)").each((function(){i(this).parents(".input__group:first").show()}))},defaultFilter:function(t,n,o){t.find(".js--checkbox-label-text").each((function(){-1==i(this).text().search(new RegExp(o,"i"))?i(this).parents(".input__group:first").hide():i(this).parents(".input__group:first").show()}))}};function p(t,n,o){var e=n.data(d),a=h(n);if(t.shiftKey&&e){var s=a.index(i(this)),r=a.index(e);a.slice(Math.min(s,r),Math.max(s,r)+1).prop("checked",e.prop("checked"))}n.data(d,i(this)),v(n)}function h(t){var i=b(t),n=i.data(e).not(":disabled");return i.hasClass("js--is-filtered")&&(n=n.filter(":visible")),n}function g(t){var i=b(t),n=h(i);i.data(o).prop("checked",n.filter(":checked").length==n.length)}function v(t){var i=b(t);i.trigger(l),g(i)}function b(t){var n=t;return"string"==typeof n&&(n=i("#"+n)),n}i.fn.uiCheckboxGroup=function(t){var o={};if(i(this).data(n)){var e=i(this).data(n);o=e,null!=t&&"string"==typeof t&&t in e&&(o=e[t].apply(this,Array.prototype.slice.call(arguments,1)))}return o},t.checkboxGroup.functions=u}(orbisAppSr,$),function(t,i){function n(t,n){var o;this.$checkboxTable=t.find("table:first"),this.colKeys=(o={},this.$checkboxTable.find("thead tr>*").each((function(t){i(this).hasClass("js--property-col")&&(o[t]=i(this).attr("id"))})),o),this.rowKeys=function(t){var n={};return t.$checkboxTable.find("tbody tr").each((function(t){n[t]=i(this).find(">*:first").attr("id")})),n}(this)}n.prototype.getTableData=function(){return n={},(t=this).$checkboxTable.find("tbody tr").each((function(o){var e=t.rowKeys[o];i(this).find(">*").each((function(o){var a=i(this).find("input[type=checkbox]");if(a.length){var s=t.colKeys[o];e in n||(n[e]={}),n[e][s]=a.is(":checked")}}))})),n;var t,n},i.fn.uiCheckboxTable=orbisApp.initPlugin(n,"uiCheckboxTable")}(orbisAppSr,jQuery),function(t,i){t.dropdown=new Object;var n="uiDropdown",o=n+"-relDropdownItems",e=n+"-relDropdown",a={init:function(l,c){var u=d(l),f=u.find(".js--dropdown-item"),p=u.find(".js--dropdown-item a");if(u.data(o,f),f.data(e,u),c){var h=f.filter(".is--active");p.on("click",(function(){r(i(this).parents(".js--dropdown-item:first"))})),h.length>0&&s(u,h.find("a").text())}t.dropdown[l]={select:function(){return a.select(u)},getSelected:function(){return a.getSelected(u)},setTitle:function(t){return a.setTitle(u,t)},dropdown:u,selectable:c},u.data(n,t.dropdown[l])},select:r,getSelected:function(t){return d(t).find(".is--active:first")},setTitle:s};function s(t,i){var n=d(t);n.find(".js--drop-down-title").text(i),n.trigger("change")}function r(t){var n=function(t){var n=t;"string"==typeof n&&(n=i("#"+n));return n}(t),a=n.data(e);a.data(o).removeClass("is--active"),n.addClass("is--active"),s(a,n.find("a").text())}function d(t){var n=t;return"string"==typeof n&&(n=i("#"+n)),n}i.fn.uiDropdown=function(t){var o={};if(i(this).data(n)){var e=i(this).data(n);o=e,null!=t&&"string"==typeof t&&t in e&&(o=e[t].apply(this,Array.prototype.slice.call(arguments,1)))}return o},t.dropdown.functions=a}(orbisAppSr,$),function(t,i){var n={};i.fn.uiExpandable=t.initOrbisPlugin({},(function(t){var o=i(this);t=i.extend({},n,t);var e=i(o).find(t.type),a=i(o).find(".expandable__button").detach();if(2==e.length)i(e).last().addClass("expandable--extra");else if(e.length-1>t.items)for(var s=t.items;s<e.length-1;s++)i(e[s]).addClass("expandable--extra");i(a).appendTo("#"+t.containerID),e.length-1<=t.items&&i(o).find(".expandable__button").addClass("display--none"),o.on("click.expandable",".expandable__button__icon, .expandable__button__text",(function(){i(this).parents(".expandable").toggleClass("is--expanded");var n=i(this).parents(".expandable").hasClass("is--expanded");i(o).find("button").attr("aria-expanded",n),n&&!t.canHide?i(o).find("button").addClass("display--none"):"icon"==t.buttonType?i(o).find("i.material-icons").html(n?"remove":"add"):i(o).find(".expandable__button__text").html(n?t.buttonText[1]:t.buttonText[0])}))}),"uiExpandable")}(orbisAppSr,$),function(t,i){t.form=new Object;var n={submit:function(){i(this).submit()},getObject:e,isValid:a,formOnSubmitOnly:function(n){var o=i(this),s=!0;if(o.data("ajaxForm")){if(a.call(this)){var r=e.call(this);i.post(o.attr("action"),r,(function(i,e,a){t.checkAjaxResponse(a)&&n&&n.apply(o,[i])}),"json")}s=!1}return s},addParameter:function(t,n){i(this).append(sprintf(o,{name:t,value:n}))},init:s},o='<input type="hidden" name="%(name)s" value="%(value)s" />';function e(){return i.extend(i(this).serializeFormToObject(),{rand:Math.floor(1e5*Math.random())})}function a(){return i(this).valid()}function s(n){i(this).validate(t.getComponentConfig("validate")),i(this).trigger("validatorInitialized")}i.fn.uiForm=t.initOrbisPlugin(n,s,"uiForm")}(orbisAppSr,$),function(t,i){function n(t,n){var o=this,a=t.parents(".ui--configuration-list:first");o.$formPage=t,o.id=o.$formPage.attr("id"),o.params=i.extend(n),o.$sidebarNav=i(`#formPageNav_${o.id}`),o.$mainControls=t.find(".js--form_page--main_controls"),o.$stickyControls=t.find(".js--form_page--sticky_controls"),o.isInsideConfigList=!!a.length,o.$configList=a,o.$scrollEl=o.isInsideConfigList?o.$configList.find("article"):i("html, body"),o.$scrollCheckEl=o.isInsideConfigList?o.$configList.find("article"):i(window),function(t){t.isInsideConfigList&&t.$stickyControls.appendTo(t.$configList).addClass("left--32");e(t),i(window).on(`resize.uiFormPage_${t.id}`,(()=>e(t))),t.$scrollCheckEl.on(`scroll.uiFormPage_${t.id}`,(()=>e(t)))}(o)}function o(t,i){t.$scrollEl.animate({scrollTop:i.offset().top-t.params.scrollOffset},300)}function e(t){!function(t){var i=t.$mainControls.offset().top,n=i+t.$mainControls.outerHeight(),o=t.$scrollCheckEl.scrollTop(),e=o+t.$scrollCheckEl.height();return n>o&&i<e}(t)?t.$stickyControls.addClass("is--active"):t.$stickyControls.removeClass("is--active")}n.prototype.backToTop=function(){o(this,this.$scrollEl)},n.prototype.goToSection=function(t){o(this,i(`#${t}`))},n.prototype.destroy=function(){i(window).off(`resize.uiFormPage_${this.id}`),this.$scrollCheckEl.off(`scroll.uiFormPage_${this.id}`),this.$stickyControls.removeClass("is--active"),this.isInsideConfigList&&setTimeout((()=>this.$mainControls.after(this.$stickyControls)),300)},i.fn.uiFormPage=t.initPlugin(n,"uiFormPage")}(orbisAppSr,jQuery),function(t,i){var n={releaseAction:null,useDefaultActions:!0},o={refreshAll:a,addItem:function(i,n){var o=t.manageItemList[i].removed.indexOf(n);o>-1?t.manageItemList[i].removed.splice(o,1):t.manageItemList[i].added.push(n)},removeItem:function(i,n){var o=t.manageItemList[i].added.indexOf(n);o>-1?t.manageItemList[i].added.splice(o,1):t.manageItemList[i].removed.push(n)},submitForm:s};function e(n,o,e){var a={action:e.action};i.ajax({url:e.sitePath+".htm",data:a,dataType:"json",method:"POST"}).done((function(i){t.showNotification("Successful update.","success")})).fail((function(i){t.showNotification("Update failed.","error")}))}function a(i){t.manageItemList[i].boardGrid.layout(),t.manageItemList[i].columnGrids.forEach((function(t){t.layout()}))}function s(n,o){i("#"+n+"__added").val(JSON.stringify(t.manageItemList[n].added)),i("#"+n+"__removed").val(JSON.stringify(t.manageItemList[n].removed)),i("#"+n+"__form input[name=action]").val(o),i("#"+n+"__form").submit()}i.fn.uiManageItemList=orbisAppSr.initOrbisPlugin(o,(function(r){var d,l=i(this),c=l.children(".board-column");r=i.extend({},n,r),t.manageItemList={},t.manageItemList[r.id]={refreshAll:function(){return o.refreshAll(r.id)}},r.useDefaultActions&&(i.extend(t.manageItemList[r.id],{added:[],removed:[]}),i.extend(r,{removeItem:function(t){return o.removeItem(r.id,t)},addItem:function(t){return o.addItem(r.id,t)},submitForm:function(){return s(r.id,r.saveAction)}}),i("#"+r.id+"__submit").on("click",(function(){s(r.id,r.submitAction)}))),i(".navigation--mobile").bind("transitionend",(function(){a(r.id)})),d=c,r.id,d.each((function(){var t=[],n=i(this).find(".board-column-content").children();n.length>0&&(n.each((function(){var n=i("<div class='board-item'><div class='board-item-content'>");n.find(".board-item-content").html(i(this).html()),i(this).data("value")&&n.data("value",i(this).data("value")),t.push(n),i(this).remove()})),i(this).find(".board-column-content").append(t))})),function(t,n){if(n.useDefaultActions)i(t[0]).find(".board-column-content").data("releaseAction",n.removeItem),i(t[1]).find(".board-column-content").data("releaseAction",n.addItem);else for(var o=0;o<t.length&&o<n.actions.length;o++)i(t[o]).find(".board-column-content").data("releaseAction",n.actions[o])}(c,r),function(n,o){var a,s=[].slice.call(n.find(".board-column-content")),r=[];s.forEach((function(n){var s=new Muuri(n,{items:".board-item",layoutDuration:400,layoutEasing:"ease",dragEnabled:!0,dragSort:function(){return r},dragSortInterval:0,dragContainer:document.body,dragReleaseDuration:400,dragReleaseEasing:"ease"}).on("dragStart",(function(n){n.getElement().style.width=n.getWidth()+"px",n.getElement().style.height=n.getHeight()+"px",t.newTopLayer(i(n.getElement())),e&&i(n.getElement()).data("origin",n.getGrid().getElement())})).on("dragReleaseEnd",(function(t){t.getElement().style.width="",t.getElement().style.height="",r.forEach((function(t){t.refreshItems()})),i(t.getElement()).data("origin")!=t.getGrid().getElement()&&(o.columnReleaseActions.length>0&&null!=o.columnReleaseActions[0]?window[i(t.getGrid().getElement()).data("releaseAction")](t.getElement()):o.useDefaultActions&&i(t.getGrid().getElement()).data("releaseAction")(i(t.getElement()).data("value")),o.releaseAction&&!o.useDefaultActions&&e(t,t.getGrid(),o))})).on("layoutStart",(function(){a.refreshItems().layout()}));r.push(s)})),a=new Muuri(".board",{layoutDuration:400,layoutEasing:"ease",dragEnabled:!1,dragSortInterval:0,dragStartPredicate:{handle:".board-column-header"},dragReleaseDuration:400,dragReleaseEasing:"ease"}),t.manageItemList[o.id].boardGrid=a,t.manageItemList[o.id].columnGrids=r}(l,r)}),"uiManageItemList")}(orbisAppSr,$),function(t,i){t.select=new Object;var n='<option class="generatedOption" value="%(value)s">%(title)s</option>',o={addOption:function(t,o){var e=i(this),a=new Object;"string"==typeof t?(o||(o=t),a[t]=o):"object"==typeof t&&(a=t);var s="";i.each(a,(function(t,i){s+=sprintf(n,{value:t,title:i})})),i(s).appendTo(e)},resetOptions:function(){i(this).find("option.generatedOption").remove()},sort:e};function e(t){var n=i(this),o=n.val();t||(t=a);var e=n.find("option.emptyOption").clone();n.find("option.emptyOption").remove(),n.html(n.find("option").sort(t)),n.prepend(e),n.val(o)}function a(t,i){return t.text==i.text?0:t.text<i.text?-1:1}i.fn.uiSelect=t.initOrbisPlugin(o,(function(t){i(this),t.sort&&e.call(this)}),"uiSelect")}(orbisAppSr,$),function(t,i){t.sidebar=new Object;var n="uiSidebar",o={show:e,hide:a,setTitle:function(t,i){var n=s(t);n.find(".modal__title").html(i),i?n.find(".modal__title").removeClass("display--none"):n.find(".modal__title").addClass("display--none")},init:function(d,l){var c=s(d);if(r(c),c.perfectScrollbar(),orbisApp&&orbisApp.setUpRegularDialog&&l)c.parent().is("is--spiral--robot")&&c.parent().parent().is("body")||i('<div class="is--spiral--robot"></div>').append(c).appendTo("body");else if(!c.parent().is("body")&&l){const t=i(`body>#${c.attr("id")}`);t.length&&t.remove(),c.appendTo("body")}t.sidebar[d]={show:function(){return o.show(c)},hide:function(){return o.hide(c)},setTitle:function(t){return o.setTitle(c,t)},showSection:function(t){return o.showSection(c,t)},hideSection:function(t){return o.hideSection(c,t)},sidebar:c},c.data(n,t.sidebar[d]);var u=c.find(".js--sidebar-section:first");u.length&&o.showSection(c,u);c.find(".js--btn--close-sidebar").click((function(){o.hide(c)})),c.data("uiShow",(function(){e(c)})),c.data("uiHide",(function(){a(c)}))},showSection:function(t,n){var e=s(t),a=n;"string"==typeof a&&(a=e.find("#"+a));a.length&&(a.trigger("show"),e.find(".js--sidebar-section:not(.display--none)").not(a).each((function(){o.hideSection(e,i(this))})),a.removeClass("display--none"),e.find(".js--selected-section").text(a.data("title")),a.trigger("shown"));return e},hideSection:function(t,i){var n=s(t),o=i;"string"==typeof o&&(o=n.find("#"+o));o.length&&(o.trigger("hide"),o.addClass("display--none"),o.trigger("hidden"));return n}};function e(n){var o=s(n),e=o.hasClass("right")?"swiperight":"swipeleft",r=o.hasClass("right")?"slideInRight":"slideInLeft";i(".js--ui-sidebar.is--visible").not(o).uiSidebar("hide"),o.hasClass("is--visible")||(o.trigger("show"),t.newTopLayer(o),i("body").addClass("overflow--hidden"),o.addClass("is--visible").animateCss(r,(function(){o.trigger("shown"),i(window).on(e+".sidebar",(function(){o.uiSidebar("hide")}))})),d(n)),i(document).on("keyup.uiSidebar",(function(t){27===t.keyCode&&a(n)}))}function a(t){var n=s(t),o=n.hasClass("right")?"swiperight":"swipeleft",e=n.hasClass("right")?"slideOutRight":"slideOutLeft";i(window).off(o+".sidebar"),n.hasClass("is--visible")&&(n.trigger("hide"),i("body").removeClass("overflow--hidden"),n.animateCss(e,(function(){n.removeClass("is--visible").trigger("hidden")})),d(t)),i(document).off("keyup.uiSidebar")}function s(t){var n=t;return"string"==typeof n&&(n=i("#"+n)),n}function r(t){var n=s(t);n.find(":focusableWithHidden").prop("tabindex",-1),n.data("openButtonSelector")&&i(n.data("openButtonSelector")).attr({"aria-controls":n.attr("id"),"aria-expanded":!1})}function d(t){var n=s(t),o=n.hasClass("is--visible"),e=n.find(".js--btn--close-sidebar");n.data("openButtonSelector")&&(e=e.add(i(n.data("openButtonSelector")))),e.attr("aria-expanded",o),n.attr("aria-expanded",o),o?(n.data("focusOnOpen",i(":focus")),n.find(":focusableWithHidden").removeProp("tabindex"),n.find(":focusableWithHidden:first").focus()):(n.data("focusOnOpen").focus(),n.find(":focusableWithHidden").prop("tabindex",-1))}i.fn.uiSidebar=function(t){var o={};if(i(this).data(n)){var e=i(this).data(n);o=e,null!=t&&"string"==typeof t&&t in e&&(o=e[t].apply(this,Array.prototype.slice.call(arguments,1)))}return o},t.sidebar.functions=o}(orbisAppSr,$),function(t,i){var n="uiSortableSr",o={handle:".drag--handle",update:function(o,a){a.item.index(),function(n){var o=n.options;if(o.synchOrder){var a=i.extend({},{action:o.synchOrder,itemsId:e(n)},o.synchOrderParams);i.post(o.synchOrderUrl,a,(function(i,n,o){t.checkAjaxResponse(o)}),"json")}}(i(this).data(n))}};function e(t){var n=Array();return t.$sortableContainer.find(".js--draggable").each((function(){n.push(i(this).data("items-id"))})),n}i.fn.uiSortable=t.initPlugin((function(t,n){var e=this;this.options=n,t.sortable(i.extend({},o,n)),e.$sortableContainer=t,t.find(".js--draggable").each((function(){$element=i(this),function(t,n){0!=t.attr("tabindex")&&t.attr("tabindex",0);i(t,this).bind("keydown",(function(t){38==t.which&&(i(this).insertBefore(i(this).prev()),i(this).focus(),n.$sortableContainer.sortable("refresh")),40==t.which&&(i(this).insertAfter(i(this).next()),i(this).focus(),n.$sortableContainer.sortable("refresh")),39==t.which&&i(this).is(":focus")&&i(this).find(":focusable").first().focus(),37==t.which&&i(this).focus()}))}($element,e),function(t,n){i(t).each((function(){i(this).attr("aria-dropeffect","move").attr("tabindex",0)})),i(t).focus((function(){i(this).attr("aria-grabbed",!0),i("html").css("overflow","hidden")})),i(t).focusout((function(){i(this).attr("aria-grabbed",!1),i("html").css("overflow","auto")}))}($element)}))}),n)}(orbisAppSr,jQuery),function(t,i){t.tabs=new Object;var n="uiTabs",o=n+"-relTabs",e=n+"-relTab",a=n+"-relSection",s={displaySection:r,init:function(s){var f=c(s),p=f.find(".arrow-left"),h=f.find(".arrow-right"),g=f.find(".tab-list"),v=f.find(".tab-list-cont"),b=f.find(".js--ui-tab .active").parent();if(t.tabs[s]={displaySection:function(t){return r(f)},tabs:f},f.find(".js--ui-tab").each((function(){if(i(this).find("a").data("showSection")){var t=u(i(this).find("a").data("showSection"));t&&(i(this).data(a,t),i(this).data(o,f),t.data(e,i(this)))}})),0==f.find(".js--ui-tab a.active").length){var m=f.find(".js--ui-tab a[data-show-section]:not([data-show-section='']):first");0!=m.length&&r(m.parents(".js--ui-tab:first").data(a))}else 0!=f.find(".js--ui-tab a.active[data-show-section]:not([data-show-section=''])").length&&r(f.find(".js--ui-tab a.active[data-show-section]:not([data-show-section=''])").parent().data(a));f.data(n,t.tabs[s]),d(f,g),i(window).on("resize",(function(){d(f,g)})),p.click({direction:"left"},l),h.click({direction:"right"},l),b.length&&function(t,i,n){var o=t[0].getBoundingClientRect(),e=i[0].getBoundingClientRect(),a=n[0].getBoundingClientRect(),s=a.left-e.left;t.scrollLeft(s-o.width/2+a.width/2)}(v,g,b);var y=null;f.on("touchstart",(function(t){y=v.scrollLeft()})),f.on("touchmove",(function(i){v.scrollLeft(y+t.lastTouchData.start[0]-t.lastTouchData.move[0])})),f.on("touchend",(function(t){y=null}))}};function r(t){var n=u(t),s=n.data(e);!function(t){var n=c(t);n.find(".js--ui-tab a.active").each((function(){var t=u(i(this).parents(".js--ui-tab:first").data(a));i(this).removeClass("active"),function(t){var i=u(t);i.trigger("hide"),i.addClass("display--none"),i.trigger("hidden")}(t)}))}(s.data(o)),s.find("a").addClass("active"),function(t){var i=u(t);i.trigger("show"),i.removeClass("display--none"),i.trigger("shown")}(n)}function d(t,i){i.width()>t.width()?i.css({"padding-left":"","padding-right":""}).parents(".cont-inception:first").css("padding","").find("button").show():i.css({"padding-left":0,"padding-right":0}).parents(".cont-inception:first").css("padding",0).find("button").hide()}function l(t){var n=i(this).parents(".cont-inception:first").find("div.tab-list-cont"),o=.7*n.width()*("left"===t.data.direction?-1:1);n.animate({scrollLeft:o+n.scrollLeft()},400)}function c(t){var n=t;return"string"==typeof n&&(n=i("#"+n)),n}function u(t){var n=t;return"string"==typeof n&&(n=i("#"+n)),n}i.fn.uiTabs=function(t){var o={};if(i(this).data(n)){var e=i(this).data(n);o=e,null!=t&&"string"==typeof t&&t in e&&(o=e[t].apply(this,Array.prototype.slice.call(arguments,1)))}return o},t.tabs.functions=s}(orbisAppSr,$),function(t,i){var n,o;function e(e,u){var f;this.$tripleLookup=e,this.modalId=u.modalId,this.controllerPath=u.controllerPath,this.params=u,f=this,console&&(f.modalId&&0!==i("#"+CSS.escape(f.modalId)).length||console.warn("The triple lookup modal is missing.")),function(e){e.$tripleLookup.find(".js--input--org-lookup").autocomplete({source:e.controllerPath+"?action="+tripleLookupActions.lookupOrgs+"&userStatus=Active&rand="+Math.floor(1e5*Math.random()),minLength:2,select:function(a,l){!function(e,a){s(e.$tripleLookup),r(e.$tripleLookup),function(o,e){var a={action:tripleLookupActions.loadDivSelectBox,tripleLookupOrganizationId:e,rand:Math.floor(1e5*Math.random())},s=o.$tripleLookup.find(".js--div-lookup-controls");n||(n=s.find(".js--lookup-container").detach());s.load(o.controllerPath,a,(function(n,e,a){t.checkAjaxResponse(a)&&o.$tripleLookup.find(".js--select--division").change((function(){!function(t,i){r(t.$tripleLookup),d(t,i),t.$tripleLookup.find(".js--input--div-id").val(i),t.$tripleLookup.trigger("tripleLookup")}(o,i(this).val())}))}))}(e,a.id),function(t){var i=t.$tripleLookup.find(".js--user-lookup-controls");o||(o=i.find(".js--lookup-container").detach());i.empty()}(e),e.$tripleLookup.find(".js--input--org-id").val(a.id),e.$tripleLookup.trigger("tripleLookup")}(e,l.item)}}),e.$tripleLookup.find(".js--input--div-lookup").autocomplete({source:e.controllerPath+"?action="+tripleLookupActions.lookupDivs+"&userStatus=Active&rand="+Math.floor(1e5*Math.random()),minLength:2,select:function(t,i){!function(t,i){a(t.$tripleLookup),r(t.$tripleLookup),d(t,i.id),t.$tripleLookup.find(".js--input--org-id").val(i.orgId),t.$tripleLookup.find(".js--input--org-lookup").val(i.orgName),t.$tripleLookup.find(".js--input--div-id").val(i.id),t.$tripleLookup.trigger("tripleLookup")}(e,i.item)}}),e.$tripleLookup.find(".js--input--user-lookup").autocomplete({source:e.controllerPath+"?action="+tripleLookupActions.lookupUsers+"&rand="+Math.floor(1e5*Math.random()),minLength:2,select:function(n,o){!function(n,o){if(o.cuCount>1){var e={action:tripleLookupActions.loadOrgDivUserOptions,tripleLookupUserId:o.id,rand:Math.floor(1e5*Math.random())};c(n.modalId).find(".js--modal-body").load(n.controllerPath,e,(function(i,n,o){t.checkAjaxResponse(o)})),c(n.modalId).find(".js--employer-name-placeholder").text(o.label),t.showModal(n.modalId)}else{e={action:tripleLookupActions.loadOrgDivUserOptions,tripleLookupUserId:o.id,rand:Math.floor(1e5*Math.random())};i.post(n.controllerPath,e,(function(i,o,e){t.checkAjaxResponse(e)&&l(n,i.orgId,i.orgName,i.divId,i.divName,i.userId)}),"json")}}(e,o.item)}}),c(e.modalId).find(".js--modal-body").on("click",".js--btn--select-org-div-user",(function(){var n=i(this).data("selection");l(e,n.orgId,n.orgName,n.divId,n.divName,n.userId),t.hideModal(e.modalId)}))}(this)}function a(t){t.find(".js--input--org-id").val(""),t.find(".js--input--org-lookup").val("")}function s(t){t.find(".js--input--div-id").val(""),t.find(".js--input--div-lookup").val("")}function r(t){t.find(".js--input--user-id").val(""),t.find(".js--input--user-lookup").val("")}function d(n,e){var a={action:tripleLookupActions.loadUserSelectBoxFromDiv,tripleLookupDivisionId:e,rand:Math.floor(1e5*Math.random())},s=n.$tripleLookup.find(".js--user-lookup-controls");o||(o=s.find(".js--lookup-container").detach()),s.load(n.controllerPath,a,(function(o,e,a){t.checkAjaxResponse(a)&&n.$tripleLookup.find(".js--select--user").change((function(){!function(t,i){t.$tripleLookup.find(".js--input--user-id").val(i),t.$tripleLookup.trigger("tripleLookup")}(n,i(this).val())}))}))}function l(t,i,n,o,e,a){t.$tripleLookup.find(".js--input--org-id").val(i),t.$tripleLookup.find(".js--input--org-lookup").val(n),t.$tripleLookup.find(".js--input--div-id").val(o),t.$tripleLookup.find(".js--input--div-lookup").val(n+" - "+e),t.$tripleLookup.find(".js--input--user-id").val(a),t.$tripleLookup.trigger("tripleLookup")}function c(t){var n=t;return"string"==typeof n&&(n=i("#"+CSS.escape(n))),n}e.prototype.reset=function(){!function(t){n&&(t.find(".js--div-lookup-controls").empty().append(n),n=null);o&&(t.find(".js--user-lookup-controls").empty().append(o),o=null);a(t),s(t),r(t)}(this.$tripleLookup)},i.fn.tripleLookup=t.initPlugin(e,"tripleLookup")}(orbisAppSr,jQuery),function(t,i){function n(n,s){this.$optionCatalog=n,this.id=n.attr("id"),this.$copyGroupSidebar=i(sprintf("#copyGroupSidebar_%s",this.id)),this.params=s,function(n){n.params.allOptionsVisible?(n.$optionCatalog.addClass("option-catalog--all-options-visible"),n.$optionCatalog.find(".js--option-catalog--option-container").removeClass("display--none")):(n.$optionCatalog.find(".js--option-catalog--option-container:first").removeClass("display--none"),n.$optionCatalog.find(".js--option-catalog--group-select:first").addClass("is--active"));n.$optionCatalog.find(".js--option-catalog--option").on("change",(function(){var t=i(this).parents(".js--option-catalog--options-group-container:first"),a=t.find(".js--option-catalog--toggle-all"),s=t.find(".js--option-catalog--option");a.prop("checked",s.filter(":checked").length==s.length),e(a),o(n)})),n.$optionCatalog.find(".js--option-catalog--toggle-all").on("change",(function(){i(this).parents(".js--option-catalog--options-group-container:first").find(".js--option-catalog--option").prop("checked",i(this).is(":checked")),e(i(this)),o(n)})),n.$optionCatalog.find(".js--option-catalog--category-filter").on("click",(function(){i(this).hasClass("is--active")?i(this).removeClass("btn--default is--active").addClass("outline btn--info").find(".material-icons").addClass("display--none"):i(this).addClass("btn--default is--active").removeClass("btn--info outline").find(".material-icons").removeClass("display--none");var t=n.$optionCatalog.find(".js--option-catalog--category-filter.is--active").map((function(){return i(this).data("categoryId")})).get();if(t.length){for(var o=Array(),e=0;e<t.length;e++)o.push(sprintf(".%s_option-container",t[e]));var a=o.join(", ");i(a).removeClass("display--none"),i(".js--option-catalog--options-group-container").not(a).addClass("display--none")}else i(".js--option-catalog--options-group-container").removeClass("display--none")})),n.$optionCatalog.find(".js--option-catalog--show-copy-sidebar").on("click",(function(){var t=i(sprintf("#copyGroupSidebar_%s",n.id)),o=i(this).data("groupId"),e=i(sprintf("#groupOptionContainer_%s",o)).find(".js--option-catalog--option").length;t.uiShow(),t.find(".js--option-catalog--copy-from").val(o),t.find(".js--option-catalog--option-copy-count").html(e),t.find(".js--option-catalog--copy-groups").removeClass("display--none").find("input").prop("checked",!1),t.find(sprintf("#copyToGroup_%s",o)).addClass("display--none")})),n.$copyGroupSidebar.find(".js--option-catalog--copy-states").on("click",(function(){var o=i(sprintf("#copyGroupSidebar_%s",n.id)),e=o.find(".js--option-catalog--copy-from").val();t.showConfirmModal("Are you sure you want to ovewrite the option states in the selected groups?",(function(){var n=o.find(".js--option-catalog--copy-groups input:checked");o.uiHide(),n.each((function(){var t=i(this).val();a(e,t)})),t.showNotification(sprintf("Option states successfully copied to %d group%s",n.length,1==n.length?"":"s"),"success")}))}))}(this)}function o(t){var n=new Object;t.$optionCatalog.find(".js--option-catalog--category").each((function(){n[i(this).attr("id")]=0})),t.$optionCatalog.find(".js--option-catalog--option-container:not(.display--none)").find(".js--option-catalog--option:checked").each((function(){n[i(this).data("categoryId")]++})),i.each(n,(function(i,n){t.$optionCatalog.find("#"+i).find("button span.js--option-catalog--category-count").html(sprintf("(%s)",n))}))}function e(t){var i=t.parents("label:first");t.is(":checked")?(i.find(".js--option-catalog--toggle-all--false-label").addClass("display--none"),i.find(".js--option-catalog--toggle-all--true-label").removeClass("display--none")):(i.find(".js--option-catalog--toggle-all--false-label").removeClass("display--none"),i.find(".js--option-catalog--toggle-all--true-label").addClass("display--none"))}function a(t,n){var o=i(sprintf("#groupOptionContainer_%s",t)),e=i(sprintf("#groupOptionContainer_%s",n));o.find(".js--option-catalog--option").each((function(){e.find(sprintf(".js--option-catalog--option[value='%s']",i(this).attr("value"))).prop("checked",i(this).is(":checked"))})),e.find(".js--option-catalog--options-group-container").each((function(){var t=i(this).find(".js--option-catalog--toggle-all"),n=i(this).find(".js--option-catalog--option");t.prop("checked",n.filter(":checked").length==n.length)}))}n.prototype.showGroup=function(t){!function(t,n){var e=i(sprintf("#groupOptionContainer_%s",n));if(t.params.allOptionsVisible){var a=e.offset();i("html, body").animate({scrollTop:a.top-64+"px"})}else{var s=i(".js--option-catalog--option-container:not(.display--none)");i(".js--option-catalog--group-select.is--active").removeClass("is--active"),s.animateCss("fadeOutRight",(function(){i(this).addClass("display--none"),i(sprintf("#groupSelectContainer_%s",n)).addClass("is--active"),e.removeClass("display--none").animateCss("fadeInLeft"),o(t)}))}}(this,t)},n.prototype.copyOptionStates=function(t,i){t&&i&&a(t,i)},i.fn.uiOptionCatalog=t.initPlugin(n,"uiOptionCatalog")}(orbisAppSr,jQuery),function(t,i){function n(t,i){var n=this;t.data("uiShow",(function(){n.show.call(n)})),t.data("uiHide",(function(){n.hide.call(n)})),n.$configList=t,n.$sidebar=t.find(".js--config-list-sidebar"),n.$configSidebar=t.find(".js--config-list-config-sidebar"),n.$configSidebarPlaceholder=t.find(".js--config-placeholder"),n.$selectedGroupTitle=t.find(".js--selected-group"),n.$loadingOverlay=t.find(".js--configuration-list--loading"),n.loadingOverlayCalls=0,n.$sidebar.on("hide",(function(){n.hideConfig()}))}function o(t){var i=t.$configList.find(".ui--form-page");i.length&&i.uiFormPage("destroy")}function e(){this.loadingOverlayCalls++,this.$loadingOverlay.addClass("is--visible")}function a(){0==--this.loadingOverlayCalls&&this.$loadingOverlay.removeClass("is--visible")}n.prototype.show=function(){this.$sidebar.uiShow()},n.prototype.hide=function(){this.hideConfig(),this.$sidebar.uiSidebar("hide")},n.prototype.nextFocus=function(t){this.$configSidebar.hasClass("is--open")&&"Tab"===t.key&&(t.shiftKey?i(document.activeElement).is(this.$sidebar.data("focusItems").first)&&(this.$sidebar.data("focusItems").last.focus(),t.preventDefault()):i(document.activeElement).is(this.$sidebar.data("focusItems").last)&&(this.$sidebar.data("focusItems").first.focus(),t.preventDefault()))},n.prototype.showConfig=function(){this.$configSidebar.hasClass("is--open")||(this.$configSidebar.addClass("is--open"),this.$configSidebar.find(":focusableWithHidden").removeAttr("tabindex").removeAttr("aria-hidden"),this.$configCloseButton&&this.$configCloseButton.removeAttr("tabindex"))},n.prototype.hideConfig=function(){this.$configSidebar.hasClass("is--open")&&(this.$configSidebar.removeClass("is--open"),this.$configSidebar.find(":focusableWithHidden").attr("tabindex",-1),i("#"+this.$sidebar.data("returnId")).focus(),o(this))},n.prototype.goToConfig=function(t){this.show(),this.$configList.find("#"+t).click()},n.prototype.showGroup=function(t){this.$configList.find("ul.js--config-list-group:not(#"+t+")").addClass("display--none"),this.$configList.find("ul#"+t).removeClass("display--none"),this.$selectedGroupTitle.text(this.$configList.find("ul#"+t).data("groupTitle"))},n.prototype.showLoadingOverlay=e,n.prototype.hideLoadingOverlay=a,n.prototype.loadConfig=function(t,n,s){var r=this;if(n||(n=""),"string"==typeof t){var d=r.$configList.find("#"+t);if(0==d.length)return;s=t,t=d.data("params"),n=d.data("url")}r.$sidebar.uiShow(),r.$configList.trigger("load"),o(r),orbisApp.newTopLayer(r.$loadingOverlay),e.call(r),r.$configSidebarPlaceholder.load(n,t,(function(){r.$configList.trigger("loaded"),a.call(r),r.$configSidebar.off("keydown"),r.showConfig(),r.$sidebar.data("focusItems",{first:r.$configSidebar.find(":focusableWithHidden:first"),last:r.$configSidebar.find(":focusableWithHidden:not([type=hidden])").last()}),s&&r.$sidebar.data("returnId",s),i(r.$configSidebar).on("keydown",(function(t){r.nextFocus(t)})),r.$sidebar.data("focusItems").first.focus()}))},i.fn.uiConfigList=t.initPlugin(n,"uiConfigList")}(orbisAppSr,jQuery);